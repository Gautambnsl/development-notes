# 7. Angular

## Basics

* Angular is a Javascript Framework which allows you to create reactive Single-Page-Applications \(SPAs\)
* Angular 1 \(now referred as Angular JS it's totally different\) Obsolete now it has been rewritten
* Angular 2 -&gt; Angular 4 -&gt; ... -&gt; Angular 9 -&gt; Angular 11 \(Nothing changed since Angular 2\)
* Install Angular CLI using npm
* create new project using `ng new my-first-project`
* It's advanced version of Javascript. Simple Janilla Javascript lacks types, classes, Interfaces
* Typescript gets compiled to Javascript then run in browser but this compilation is very fast

### Setting up Bootstrap

* npm install --save bootstrap
* Then in angular.json in styles add path `"node_modules/bootstrap/dist/css/bootstrap.min.css"`Before default styles.css

### Create Component

* Angular uses bunch of modules, default is app  module which has declaration of all components within that module, imports are external modules which are imported.
* App Component is then called, each component has seperate css, ts, html and .spec.ts \(for testing\)
* You can manually create a new component, put in new folder take care of naming convention and add it to module or type `ng generate component servers`

### Data Binding

* Shows data from typescript to html

```typescript
export class ServerComponent implements OnInit {
    serverId: number = 10;
    serverStatus: string = 'offline';

    constructor() { }
    ngOnInit() { }
}

// In HTML
<p>Server with {{ serverId }} is {{ serverStatus }}</p>
```

### Property & Event Binding

* Change some property of Element/Component \(uses \[...\]\)
* Do some event \(uses \(...\)\)

```typescript
export class ServersComponent implements OnInit {
  allowNewServer = false;

  constructor() {
    setTimeout(() => {
      this.allowNewServer = true;
    }, 2000);
  }
  ngOnInit(): void {
  }
}

// In HTML

<button
  class="btn btn-primary"
  [disabled]="!allowNewServer"
  (click)="onClickAddServer($event)"
>
  Add Server
</button>
```

### Two Way Binding

* Two way bind data say for textbox, here it uses a special directive ng-model

```typescript
// HTML
<input type="text" class="form-control" [(ngModel)]="serverName" />

// Make sure to import this in App module
import { FormsModule } from '@angular/forms';
// And put this inside imports of App module
FormsModule
```

### Built-in Directives

* Directives are instructions in the DOM

```typescript
// * because it's a structural directive
<p *ngIf="serverCreated; else noServer">Server was created!</p>
<ng-template #noServer>
    <p>No Server was created!</p>
</ng-template>

/* severCreated is a bool defined in component.ts
ng-template marks a portion with some tag, so that it can be used later
*/

// ngStyle derrivative, here it's binded with getColor method that's why inside []
<p [ngStyle]="{backgroundColor: getColor()}">{{ status }}</p>

// ngClass, it adds css class based on condition specified
<p [ngClass]="{online: isOnline, offline: !isOnline}">{{ status }}</p>

// ngFor
<p *ngFor="let item of items">{{ item }}</p>
```

> You can also create nameOfComponent.model.ts file to store some typeScript class maybe like a data class which is getting instanced in the original component.ts

> Install Augury Chrome Extension

## Components & Data Binding

### Send custom Data from parent to child

```typescript
// parent.html
<app-server-element
  *ngFor="let serverElement of serverElements"
  [element]="serverElement"
></app-server-element>

// child.ts
export class ServerElementComponent implements OnInit {
  @Input() element: { type: string, name: string, content: string };

  constructor() { }
  ngOnInit(): void { }
}

// child.html
{{ element.name }}
```

* Without @Input decorator the variable won't be accessible as property
* You can set an alias instead of variable name by `@Input('alias-instead-of-variable-name')`

### Get Event callback from child to parent

```typescript
// child.ts
export class CockpitComponent implements OnInit {

  @Output() serverCreated = new EventEmitter<{ serverName: string, serverContent: string }>();
  @Output() blueprintCreated = new EventEmitter<{ blueprintName: string, blueprintContent: string }>();
  newServerName = '';
  newServerContent = '';

  constructor() { }
  ngOnInit(): void { }
  onAddServer() {    // called by button in child.html
    this.serverCreated.emit({ serverName: this.newServerName, serverContent: this.newServerContent });
  }
  onAddBlueprint() {    // called by button in child.html
    this.blueprintCreated.emit({ blueprintName: this.newServerName, blueprintContent: this.newServerContent });
  }
}

// parent.html
<app-cockpit
  (serverCreated)="onServerAdded($event)"
  (blueprintCreated)="onBlueprintAdded($event)"
></app-cockpit>
```

* You can set an alias instead of variable name by `@Output('alias-instead-of-variable-name')`
* 
